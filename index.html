<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Basic Dashboard â€“ RK KNIT FAB</title>
</head>

<body>

<h2>Pending Lots (From Received From Dyeing)</h2>

<div id="dataArea">Loading...</div>

<script>

// YOUR Apps Script Web App URL
const API = "https://script.google.com/macros/s/AKfycbz7Ggy8e_NA6Wg6R5QMxP22hjDf6esMiXN-UOn_1NwzuXNDM1kTjwmycfCvZ9JqT5pH/exec";

async function loadData() {
  const res = await fetch(API);
  const data = await res.json();
  render(data);
}

function render(data) {

  let html = "<table border='1' cellpadding='6' cellspacing='0'>";
  html += `
    <tr>
      <th>Date</th>
      <th>Lot</th>
      <th>Item</th>
      <th>Color</th>
      <th>Party</th>
      <th>Status</th>
      <th>Done</th>
    </tr>
  `;

  data.forEach(row => {
    html += `
      <tr>
        <td>${row.date}</td>
        <td>${row.lot}</td>
        <td>${row.item}</td>
        <td>${row.color}</td>
        <td>${row.party}</td>
        <td>${row.status}</td>
        <td><button onclick="markDone('${row.lot}')">Done</button></td>
      </tr>
    `;
  });

  html += "</table>";

  document.getElementById("dataArea").innerHTML = html;
}

async function markDone(lot) {
  await fetch(`${API}?action=done&lot=${lot}`);
  loadData(); // refresh
}

loadData();

</script>

</body>
</html>
